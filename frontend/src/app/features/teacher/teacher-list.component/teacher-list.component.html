<div class="container-fluid py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="h2 mb-0">
        <i class="bi bi-person-badge-fill text-success me-2"></i>
        Teachers
      </h1>
      <p class="text-muted mb-0">Manage teacher information</p>
    </div>
    @if (canCreate) {
    <button routerLink="/teachers/create" class="btn btn-success">
      <i class="bi bi-plus-circle me-2"></i>
      Add Teacher
    </button>
    }
  </div>

  @if (loading) {
  <div class="text-center py-5">
    <div class="spinner-border text-success"></div>
    <p class="mt-2 text-muted">Loading teachers...</p>
  </div>
  } @else {
  <div class="card">
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th><i class="bi bi-person me-1"></i> Name</th>
              <th><i class="bi bi-envelope me-1"></i> Email</th>
              <th><i class="bi bi-telephone me-1"></i> Phone</th>
              <th><i class="bi bi-person-badge me-1"></i> Username</th>
              <th><i class="bi bi-book me-1"></i> Subjects</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (teacher of teachers; track teacher._id) {
            <tr>
              <td class="align-middle">
                <div class="d-flex align-items-center">
                  <div
                    class="bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-2"
                    style="width: 32px; height: 32px;">
                    {{ teacher.name.charAt(0) }}
                  </div>
                  <strong>{{ teacher.name }}</strong>
                </div>
              </td>
              <td class="align-middle">{{ teacher.user.email }}</td>
              <td class="align-middle">
                @if (teacher.phone) {
                <i class="bi bi-telephone-fill text-success me-1"></i>
                {{ teacher.phone }}
                } @else {
                <span class="text-muted">-</span>
                }
              </td>
              <td class="align-middle">
                <span class="badge bg-secondary">{{ teacher.user.username }}</span>
              </td>
              <td class="align-middle">
                <span class="badge bg-info">{{ teacher?.subject?.subjectName || "No teach"}}</span>
              </td>
              <td class="align-middle text-center">
                <div class="btn-group btn-group-sm">
                  <button [routerLink]="['/teachers', teacher._id]" class="btn btn-outline-primary"
                    title="View Details">
                    <i class="bi bi-eye"></i>
                  </button>
                  @if (canEdit) {
                  <button [routerLink]="['/teachers/edit', teacher._id]" class="btn btn-outline-success" title="Edit">
                    <i class="bi bi-pencil"></i>
                  </button>
                  }
                  @if (canDelete) {
                  <button (click)="deleteTeacher(teacher._id, $event)" class="btn btn-outline-danger" title="Delete">
                    <i class="bi bi-trash"></i>
                  </button>
                  }
                </div>
              </td>
            </tr>
            } @empty {
            <tr>
              <td colspan="6" class="text-center py-5">
                <i class="bi bi-inbox text-muted" style="font-size: 3rem;"></i>
                <p class="text-muted mt-2">No teachers found</p>
                @if (canCreate) {
                <button routerLink="/teachers/create" class="btn btn-success btn-sm">
                  <i class="bi bi-plus-circle me-1"></i>
                  Add First Teacher
                </button>
                }
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>

  @if (teachers.length > 0) {
  <div class="d-flex justify-content-between align-items-center mt-3">
    <p class="text-muted mb-0">Showing {{ teachers.length }} teacher(s)</p>
  </div>
  }
  }
</div>