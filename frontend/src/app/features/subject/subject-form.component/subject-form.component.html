

<div class="container">

  <!-- Form Header -->
  <div class="form-header">
    <h1>
      <span *ngIf="!isEditMode">ğŸ“ Create New Subject</span>
      <span *ngIf="isEditMode">âœï¸ Edit Subject</span>
    </h1>
    <p class="subtitle">
      <span *ngIf="!isEditMode">Fill in the details below to add a new subject to the system</span>
      <span *ngIf="isEditMode">Update the subject information below</span>
    </p>
  </div>

  <!-- Error Message Alert -->
  <div *ngIf="error" class="error-message">
    <strong>âš ï¸ Error:</strong> {{ error }}
  </div>

  <!-- Main Form -->
  <form [formGroup]="subjectForm" (ngSubmit)="onSubmit()" class="subject-form">

    <!-- Section 1: Basic Information -->
    <div class="form-section">
      <h3 class="section-title">ğŸ“š Basic Information</h3>

      <!-- Subject Name (Required) -->
      <div class="form-group">
        <label for="subjectName" class="required-label">
          Subject Name
          <span class="required-star">*</span>
        </label>
        <input
          type="text"
          id="subjectName"
          formControlName="subjectName"
          class="form-control"
          placeholder="e.g., Advanced Mathematics"
          [class.invalid]="f['subjectName'].invalid && f['subjectName'].touched"
        />
        <small class="help-text">Enter the full name of the subject</small>
        <div *ngIf="f['subjectName'].invalid && f['subjectName'].touched" class="error-text">
          <span class="error-icon">âš ï¸</span> Subject name is required
        </div>
      </div>

      <!-- Subject Code and Credits Row -->
      <div class="form-row">
        <!-- Subject Code -->
        <div class="form-group">
          <label for="subjectCode">Subject Code</label>
          <input
            type="text"
            id="subjectCode"
            formControlName="subjectCode"
            class="form-control"
            placeholder="e.g., MATH301"
          />
          <small class="help-text">Optional course code</small>
        </div>

        <!-- Credits -->
        <div class="form-group">
          <label for="credit">Credits</label>
          <input
            type="number"
            id="credit"
            formControlName="credit"
            class="form-control"
            placeholder="1-10"
            min="1"
            max="10"
            [class.invalid]="f['credit'].invalid && f['credit'].touched"
          />
          <small class="help-text">Value between 1 and 10</small>
          <div *ngIf="f['credit'].invalid && f['credit'].touched" class="error-text">
            <span class="error-icon">âš ï¸</span> Credits must be between 1 and 10
          </div>
        </div>
      </div>
    </div>

    <!-- Section 2: Schedule Information -->
    <div class="form-section">
      <h3 class="section-title">ğŸ• Schedule Information</h3>

      <!-- Day of Week -->
      <div class="form-group">
        <label for="dayOfWeek">Day of Week</label>
        <select
          id="dayOfWeek"
          formControlName="dayOfWeek"
          class="form-control"
        >
          <option value="">-- Select a day --</option>
          <option *ngFor="let day of daysOfWeek" [value]="day">
            {{ day }}
          </option>
        </select>
        <small class="help-text">Choose the day when this subject is taught</small>
      </div>

      <!-- Start Time and End Time Row -->
      <div class="form-row">
        <!-- Start Time -->
        <div class="form-group">
          <label for="teachTime">
            <span class="icon">ğŸ•</span> Start Time
          </label>
          <input
            type="datetime-local"
            id="teachTime"
            formControlName="teachTime"
            class="form-control"
          />
          <small class="help-text">When does the class start?</small>
        </div>

        <!-- End Time -->
        <div class="form-group">
          <label for="endTime">
            <span class="icon">ğŸ•</span> End Time
          </label>
          <input
            type="datetime-local"
            id="endTime"
            formControlName="endTime"
            class="form-control"
          />
          <small class="help-text">When does the class end?</small>
        </div>
      </div>
    </div>

    <!-- Section 3: Additional Information -->
    <div class="form-section">
      <h3 class="section-title">â„¹ï¸ Additional Information</h3>

      <!-- Teacher ID -->
      <div class="form-group">
        <label for="teacherId">
          <span class="icon">ğŸ‘¨â€ğŸ«</span> Teacher ID
        </label>
        <select
          id="teacherId"
          formControlName="teacherId"
          class="form-control"
        >
          <option value="">Select a teacher</option>
          <option *ngFor="let teacher of teachers" [value]="teacher._id">
            {{ teacher.name }} ({{ teacher._id }})
          </option>
        </select>
        <small class="help-text">Select the teacher assigned to this subject</small>
      </div>

      <!-- Description -->
      <div class="form-group">
        <label for="description">
          <span class="icon">ğŸ“</span> Description
        </label>
        <textarea
          id="description"
          formControlName="description"
          class="form-control"
          rows="5"
          placeholder="Enter a detailed description of the subject, including topics covered, prerequisites, and learning objectives..."
        ></textarea>
        <small class="help-text">
          Provide a comprehensive description of the subject (optional)
        </small>
      </div>
    </div>

    <!-- Form Actions / Buttons -->
    <div class="form-actions">
      <button
        type="button"
        class="btn btn-secondary"
        (click)="cancel()"
        [disabled]="loading"
      >
        <span class="icon">âœ–ï¸</span> Cancel
      </button>

      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="loading || subjectForm.invalid"
        [class.loading]="loading"
      >
        <span *ngIf="!loading">
          <span class="icon" *ngIf="!isEditMode">â•</span>
          <span class="icon" *ngIf="isEditMode">ğŸ’¾</span>
          {{ isEditMode ? 'Update Subject' : 'Create Subject' }}
        </span>
        <span *ngIf="loading">
          <span class="spinner-small"></span>
          Saving...
        </span>
      </button>
    </div>

    <!-- Form Validation Summary -->
    <div *ngIf="subjectForm.invalid && subjectForm.touched" class="validation-summary">
      <p class="validation-title">
        <span class="icon">âš ï¸</span> Please fix the following errors:
      </p>
      <ul>
        <li *ngIf="f['subjectName'].invalid && f['subjectName'].touched">
          Subject name is required
        </li>
        <li *ngIf="f['credit'].invalid && f['credit'].touched">
          Credits must be between 1 and 10
        </li>
      </ul>
    </div>

  </form>

  <!-- Help Section -->
  <div class="help-section">
    <h4>ğŸ’¡ Tips</h4>
    <ul>
      <li>Fields marked with <span class="required-star">*</span> are required</li>
      <li>Subject code should be unique for each subject</li>
      <li>Make sure the end time is after the start time</li>
      <li>You can always edit the subject information later</li>
    </ul>
  </div>

</div>
